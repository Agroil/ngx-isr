export function addIsrDataBeforeSerialized(isrService, doc) {
    return () => addISRDataToBody(doc, isrService.getState());
}
// append script with revalidate and errors data for the current route
function addISRDataToBody(doc, { revalidate, errors }) {
    return new Promise(resolve => {
        const script = doc.createElement('script');
        script.id = 'isr-state';
        script.setAttribute('type', 'application/json');
        script.textContent = JSON.stringify({ revalidate, errors });
        doc.body.appendChild(script);
        resolve();
    });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWRkLWlzci1kYXRhLWJlZm9yZS1zZXJpYWxpemVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvbmd4LWlzci9zcmMvbGliL3V0aWxzL2FkZC1pc3ItZGF0YS1iZWZvcmUtc2VyaWFsaXplZC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQSxNQUFNLFVBQVUsMEJBQTBCLENBQUMsVUFBeUIsRUFBRSxHQUFhO0lBQ2pGLE9BQU8sR0FBRyxFQUFFLENBQUMsZ0JBQWdCLENBQUMsR0FBRyxFQUFFLFVBQVUsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDO0FBQzVELENBQUM7QUFFRCxzRUFBc0U7QUFDdEUsU0FBUyxnQkFBZ0IsQ0FBQyxHQUFhLEVBQUUsRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUFlO0lBQzFFLE9BQU8sSUFBSSxPQUFPLENBQU8sT0FBTyxDQUFDLEVBQUU7UUFDakMsTUFBTSxNQUFNLEdBQUcsR0FBRyxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUMzQyxNQUFNLENBQUMsRUFBRSxHQUFHLFdBQVcsQ0FBQztRQUN4QixNQUFNLENBQUMsWUFBWSxDQUFDLE1BQU0sRUFBRSxrQkFBa0IsQ0FBQyxDQUFDO1FBQ2hELE1BQU0sQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFFLFVBQVUsRUFBRSxNQUFNLEVBQUUsQ0FBQyxDQUFDO1FBQzVELEdBQUcsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzdCLE9BQU8sRUFBRSxDQUFDO0lBQ1osQ0FBQyxDQUFDLENBQUE7QUFDSixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmd4SXNyU2VydmljZSwgTmd4SXNyU3RhdGUgfSBmcm9tICcuLi9uZ3gtaXNyLnNlcnZpY2UnO1xuXG5leHBvcnQgZnVuY3Rpb24gYWRkSXNyRGF0YUJlZm9yZVNlcmlhbGl6ZWQoaXNyU2VydmljZTogTmd4SXNyU2VydmljZSwgZG9jOiBEb2N1bWVudCk6ICgpID0+IFByb21pc2U8dm9pZD4ge1xuICByZXR1cm4gKCkgPT4gYWRkSVNSRGF0YVRvQm9keShkb2MsIGlzclNlcnZpY2UuZ2V0U3RhdGUoKSk7XG59XG5cbi8vIGFwcGVuZCBzY3JpcHQgd2l0aCByZXZhbGlkYXRlIGFuZCBlcnJvcnMgZGF0YSBmb3IgdGhlIGN1cnJlbnQgcm91dGVcbmZ1bmN0aW9uIGFkZElTUkRhdGFUb0JvZHkoZG9jOiBEb2N1bWVudCwgeyByZXZhbGlkYXRlLCBlcnJvcnMgfTogTmd4SXNyU3RhdGUpOiBQcm9taXNlPHZvaWQ+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlPHZvaWQ+KHJlc29sdmUgPT4ge1xuICAgIGNvbnN0IHNjcmlwdCA9IGRvYy5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiAgICBzY3JpcHQuaWQgPSAnaXNyLXN0YXRlJztcbiAgICBzY3JpcHQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICBzY3JpcHQudGV4dENvbnRlbnQgPSBKU09OLnN0cmluZ2lmeSh7IHJldmFsaWRhdGUsIGVycm9ycyB9KTtcbiAgICBkb2MuYm9keS5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICAgIHJlc29sdmUoKTtcbiAgfSlcbn1cbiJdfQ==